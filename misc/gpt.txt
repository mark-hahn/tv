
changes to the dlStatus card:
  rename state value downloading to Getting,
  when a file/card is finished:
    replace Eta with Finished: "<month>/<day> <hours>:<mins>", and
    replace Progress with Elapsed "<mins>:<secs>",
--
  torrent scrolling should start at bottom

======================================================

in flex card find and convert date/time from utc to local date/time

======================================================

changes to the torrent pane:
  when card selected don't open details tab if card already has checkmark.
  --
  add Details button between download and search buttons.
  Details button should open details tab.
  make all hdr buttons in torrent and tvproc panes the same size as tab buttons
--
  when download button is clicked and torrent file downloaded, get file title list using parse-torrent module, and for each file name use parse-torrent-tile to parse file name into season and episode numbers, and if season or episode number is missing bring up modal dialog with msg: "Torrent file name is missing a season or episode number." and then abort sending torrent to usb. for testing log the results of the parse-torrent-tile results

======================================================

read data from tv.json, not tv.log, it will be a json file with an array of file objects, one per file. each file object will have these properties when the download is started:
status, title, fileSize, season, episode, dateStarted, and the local file path.
fileSize is an integer number of bytes. dates are integer linux timestamps.
---
the status will be "downloading" when the download is started.
---
when finished the object will also have the property dateEnded and the status changed to "finished". 
---
when there is an error the status will have the string error message. 
--
change the scroll display from plain text to cards, one card per file object. The card list should be updated every 5 secs.
The cards should be ordered from oldest to newest.
Like the other card lists the scroll pane should be scrolled to the bottom when loaded.  if it is at the bottom when more panes added it should scroll to bottom.  if not at the the bottom it should not scroll.
---
the first line of the card should be the title in bold font. the second line is info with fields separate by commas. 
--
When started the second line should be "S<season>:E<episode>, <size in format 0.123 GB>, <dateStarted in format "month/day hour:mins">, Downloading"
--
When ended the second line should be "S<season>:E<episode>, <size in format 0.123 GB>, <dateStarted in format "month/day hour:mins">, <dateEnded in format "month/day hour:mins">, Finished"

======================================================

in tvproc:
reduce title font-size to 14px.
when Finished add elapsed download time <mins:secs> to info line before "Finished".
the json object now has a "sequence" property in file object. it should appear before title in first line as <seq> <title>.
<seq> and "S<season>:E<episode> should be color blue.

======================================================

<seq> and "S<season>:E<episode> should be color blue.

======================================================

add paren after sequence number, also blue

======================================================

show tvproc cards in order of json array -- don't sort

======================================================

json file is:
[
  {
    "localPath": "/mnt/media/tv/Cheers/Season 11/",
    "title": "Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv",
    "status": "finished",
    "sequence": 1,
    "fileSize": 220969134,
    "season": 11,
    "episode": 4,
    "dateStarted": 1766108798,
    "dateEnded": 1766108821
  },
  {
    "localPath": "/mnt/media/tv/Cheers/Season 11/",
    "title": "Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv",
    "status": "downloading",
    "sequence": 1,
    "fileSize": 220969134,
    "season": 11,
    "episode": 4,
    "dateStarted": 1766108798
  },
  {
    "localPath": "/mnt/media/tv/Cheers/Season 11/",
    "title": "Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv",
    "status": "downloading",
    "sequence": 2,
    "fileSize": 220969134,
    "season": 11,
    "episode": 4,
    "dateStarted": 1766108798
  }
]
--
but tvproc list is:
1) Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv
S11:E4, 0.221 GB, 12/18 17:46, Downloading
2) Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv
S11:E4, 0.221 GB, 12/18 17:46, Downloading
1) Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv
S11:E4, 0.221 GB, 12/18 17:46, 12/18 17:47, 0:23, Finished

======================================================

put a row of = between cards when second card has sequence 1

======================================================

divider did not appear -- also make sure divider has no margins

======================================================

arrow buttons broken in actors pane

======================================================

it is no-emby but they should still work -- 
when i click on arrow the hdr msg changes from Regulars to Guests, the input boxes don't change, and the actors list doesn't change. T 
when i click on guest button the actors do change.
when i change an number in the input box and press enter it does work.

======================================================

for noemby shows you can build an Emby episode map -- the map pane does it for noemby

======================================================

in src/emby.js add a function refreshLib() that takes no args and starts refreshing emby's library using the api POST "/emby/Library/Refresh".
--
then if available, use the emby api endpoint: GET "/emby/ScheduledTasks?api_key=<key>" to get a task list. if it finds a task in the list like “Scan Media Library” or “Refresh Media Library”, refreshLib() should return the id, key, hash, etc, as {"status":"hasTask", "taskId":<task id>}. if not then return {"status":"notask"}.
--
add a second function to src/emby.js, taskStatus(<task id>), that takes <task id> arg and returns status.
--
taskStatus() works by refreshing task list and returning the status from status list entry <task id> if available, using {"status":"refreshing", "taskStatus":<scheduled-task status>}. if there is a progress value like CurrentProgressPercentage return {"status":"refreshing", "progress":<progress>}. 
--
if the task list doesn't have a <task id> entry any more, or the state/progress has flipped back to idle, or progress is finished, then taskStatus() returns {"status":"refreshdone"}.
--
if there is an error in any call return {"status":"<error>"} 
--
in tvproc pane add button "Library" to left of Trim.
--
Library button should call refreshLib() and if it gets {"status":"notask"} or {"status":"<error>"} then the library refresh logic is done.
--
if it returns {"status":"hasTask", "taskId":<task id>} then taskStatus(<task id>) is repeatedly called with a delay of 2 secs between each call and the previous return result. It keeps calling and showing progress to the left of the Library button until {"status":"refreshdone"} or {status":"<error>"} is returned.
-
if the pane is reloaded the progress display should be cleared
--
while taskStatus(<task id>) is being called the button "Library" should do nothing.

======================================================

when showing progress to the left of the Library button do not remove 100% msg when finished. remove it on fresh pane load.

======================================================

progress to the left of the Library button still disappears when finished

======================================================

