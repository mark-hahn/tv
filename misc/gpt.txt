
changes to the dlStatus card:
  rename state value downloading to Getting,
  when a file/card is finished:
    replace Eta with Finished: "<month>/<day> <hours>:<mins>", and
    replace Progress with Elapsed "<mins>:<secs>",
--
  torrent scrolling should start at bottom

======================================================

in flex card find and convert date/time from utc to local date/time

======================================================

changes to the torrent pane:
  when card selected don't open details tab if card already has checkmark.
  --
  add Details button between download and search buttons.
  Details button should open details tab.
  make all hdr buttons in torrent and tvproc panes the same size as tab buttons
--
  when download button is clicked and torrent file downloaded, get file title list using parse-torrent module, and for each file name use parse-torrent-tile to parse file name into season and episode numbers, and if season or episode number is missing bring up modal dialog with msg: "Torrent file name is missing a season or episode number." and then abort sending torrent to usb. for testing log the results of the parse-torrent-tile results

======================================================

read data from tv.json, not tv.log, it will be a json file with an array of file objects, one per file. each file object will have these properties when the download is started:
status, title, fileSize, season, episode, dateStarted, and the local file path.
fileSize is an integer number of bytes. dates are integer linux timestamps.
---
the status will be "downloading" when the download is started.
---
when finished the object will also have the property dateEnded and the status changed to "finished". 
---
when there is an error the status will have the string error message. 
--
change the scroll display from plain text to cards, one card per file object. The card list should be updated every 5 secs.
The cards should be ordered from oldest to newest.
Like the other card lists the scroll pane should be scrolled to the bottom when loaded.  if it is at the bottom when more panes added it should scroll to bottom.  if not at the the bottom it should not scroll.
---
the first line of the card should be the title in bold font. the second line is info with fields separate by commas. 
--
When started the second line should be "S<season>:E<episode>, <size in format 0.123 GB>, <dateStarted in format "month/day hour:mins">, Downloading"
--
When ended the second line should be "S<season>:E<episode>, <size in format 0.123 GB>, <dateStarted in format "month/day hour:mins">, <dateEnded in format "month/day hour:mins">, Finished"

======================================================

in tvproc:
reduce title font-size to 14px.
when Finished add elapsed download time <mins:secs> to info line before "Finished".
the json object now has a "sequence" property in file object. it should appear before title in first line as <seq> <title>.
<seq> and "S<season>:E<episode> should be color blue.

======================================================

<seq> and "S<season>:E<episode> should be color blue.

======================================================

add paren after sequence number, also blue

======================================================

show tvproc cards in order of json array -- don't sort

======================================================

json file is:
[
  {
    "localPath": "/mnt/media/tv/Cheers/Season 11/",
    "title": "Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv",
    "status": "finished",
    "sequence": 1,
    "fileSize": 220969134,
    "season": 11,
    "episode": 4,
    "dateStarted": 1766108798,
    "dateEnded": 1766108821
  },
  {
    "localPath": "/mnt/media/tv/Cheers/Season 11/",
    "title": "Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv",
    "status": "downloading",
    "sequence": 1,
    "fileSize": 220969134,
    "season": 11,
    "episode": 4,
    "dateStarted": 1766108798
  },
  {
    "localPath": "/mnt/media/tv/Cheers/Season 11/",
    "title": "Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv",
    "status": "downloading",
    "sequence": 2,
    "fileSize": 220969134,
    "season": 11,
    "episode": 4,
    "dateStarted": 1766108798
  }
]
--
but tvproc list is:
1) Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv
S11:E4, 0.221 GB, 12/18 17:46, Downloading
2) Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv
S11:E4, 0.221 GB, 12/18 17:46, Downloading
1) Cheers.S11E04.1080p.HEVC.x265-MeGusta.mkv
S11:E4, 0.221 GB, 12/18 17:46, 12/18 17:47, 0:23, Finished

======================================================

put a row of = between cards when second card has sequence 1

======================================================

divider did not appear -- also make sure divider has no margins

======================================================

arrow buttons broken in actors pane

======================================================

it is no-emby but they should still work -- 
when i click on arrow the hdr msg changes from Regulars to Guests, the input boxes don't change, and the actors list doesn't change. T 
when i click on guest button the actors do change.
when i change an number in the input box and press enter it does work.

======================================================

for noemby shows you can build an Emby episode map -- the map pane does it for noemby

======================================================

in src/emby.js add a function refreshLib() that takes no args and starts refreshing emby's library using the api POST "/emby/Library/Refresh".
--
then if available, use the emby api endpoint: GET "/emby/ScheduledTasks?api_key=<key>" to get a task list. if it finds a task in the list like “Scan Media Library” or “Refresh Media Library”, refreshLib() should return the id, key, hash, etc, as {"status":"hasTask", "taskId":<task id>}. if not then return {"status":"notask"}.
--
add a second function to src/emby.js, taskStatus(<task id>), that takes <task id> arg and returns status.
--
taskStatus() works by refreshing task list and returning the status from status list entry <task id> if available, using {"status":"refreshing", "taskStatus":<scheduled-task status>}. if there is a progress value like CurrentProgressPercentage return {"status":"refreshing", "progress":<progress>}. 
--
if the task list doesn't have a <task id> entry any more, or the state/progress has flipped back to idle, or progress is finished, then taskStatus() returns {"status":"refreshdone"}.
--
if there is an error in any call return {"status":"<error>"} 
--
in tvproc pane add button "Library" to left of Trim.
--
Library button should call refreshLib() and if it gets {"status":"notask"} or {"status":"<error>"} then the library refresh logic is done.
--
if it returns {"status":"hasTask", "taskId":<task id>} then taskStatus(<task id>) is repeatedly called with a delay of 2 secs between each call and the previous return result. It keeps calling and showing progress to the left of the Library button until {"status":"refreshdone"} or {status":"<error>"} is returned.
-
if the pane is reloaded the progress display should be cleared
--
while taskStatus(<task id>) is being called the button "Library" should do nothing.

======================================================

when showing progress to the left of the Library button do not remove 100% msg when finished. remove it on fresh pane load.

======================================================

progress to the left of the Library button still disappears when finished

======================================================

the tmdb list had no entries at initial load.  this is the same problem the other model had and could not fix.  please fix it.  this is the console output from this run:
 tmdb list size: 0 actors.vue:109:15
tvdb list size: 24 actors.vue:110:15
----- beginning of loop ----- actors.vue:125:17
tmdb list is empty: append entire tvdb list to output and exit loop actors.vue:128:19
tmdb list should be empty: 0 actors.vue:178:15
output list size: 24 actors.vue:179:15
---
feel free to add logging statements.

======================================================

i never tested the guests loading, only the series actors -- never do the { showName, year: null, season: 1, episode: 1 } -fallback. -- this is the console from this run:
15:19:57.188 Fetching TMDB actors for show: 30 Rock actors.vue:560:15
15:19:57.189 TMDB request attempt 1: {"showName":"30 Rock","year":null} actors.vue:573:19
15:19:57.290 TMDB response attempt 1: undefined actors object actors.vue:577:21
15:19:57.290 TMDB request attempt 2: {"showName":"30 Rock"} actors.vue:573:19
15:19:57.316 TMDB response attempt 2: undefined actors object actors.vue:577:21
15:19:57.316 TMDB request attempt 3: {"showName":"30 Rock","year":null,"season":1,"episode":1} actors.vue:573:19
15:19:59.181 TMDB response attempt 3: 16 actors object actors.vue:577:21
15:19:59.182 TMDB success with params: {"showName":"30 Rock","year":null,"season":1,"episode":1} actors.vue:581:23
15:19:59.182 Processing TMDB actors, count: 16 actors.vue:590:19
15:19:59.182 TMDB list built successfully, count: 16 actors.vue:606:19
15:19:59.182 tmdb list size: 16 actors.vue:68:15
15:19:59.182 tvdb list size: 24 actors.vue:69:15
15:19:59.183 ----- beginning of loop ----- actors.vue:84:17
15:19:59.183 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Alison White", tvdb: "Alec Baldwin" }
actors.vue:102:17
15:19:59.185 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.185 ----- beginning of loop ----- actors.vue:84:17
15:19:59.185 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Alison White", tvdb: "Cheyenne Jackson" }
actors.vue:102:17
15:19:59.185 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.185 ----- beginning of loop ----- actors.vue:84:17
15:19:59.185 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Anita Durst", tvdb: "Cheyenne Jackson" }
actors.vue:102:17
15:19:59.185 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.185 ----- beginning of loop ----- actors.vue:84:17
15:19:59.185 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Ciaran Tyrrell", tvdb: "Cheyenne Jackson" }
actors.vue:102:17
15:19:59.186 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.186 ----- beginning of loop ----- actors.vue:84:17
15:19:59.186 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Ciaran Tyrrell", tvdb: "Chris Parnell" }
actors.vue:102:17
15:19:59.186 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.186 ----- beginning of loop ----- actors.vue:84:17
15:19:59.186 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Ciaran Tyrrell", tvdb: "Dean Winters" }
actors.vue:102:17
15:19:59.186 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.186 ----- beginning of loop ----- actors.vue:84:17
15:19:59.186 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Emana Rachelle", tvdb: "Dean Winters" }
actors.vue:102:17
15:19:59.186 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.186 ----- beginning of loop ----- actors.vue:84:17
15:19:59.186 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Emana Rachelle", tvdb: "Elaine Stritch" }
actors.vue:102:17
15:19:59.186 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.186 ----- beginning of loop ----- actors.vue:84:17
15:19:59.186 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Emana Rachelle", tvdb: "Elizabeth Banks" }
actors.vue:102:17
15:19:59.186 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.186 ----- beginning of loop ----- actors.vue:84:17
15:19:59.186 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Emana Rachelle", tvdb: "Grizz Chapman" }
actors.vue:102:17
15:19:59.186 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.186 ----- beginning of loop ----- actors.vue:84:17
15:19:59.186 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Gary Cowling", tvdb: "Grizz Chapman" }
actors.vue:102:17
15:19:59.187 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.187 ----- beginning of loop ----- actors.vue:84:17
15:19:59.187 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Grizz Chapman", tvdb: "Grizz Chapman" }
actors.vue:102:17
15:19:59.187 duplicate names and tmdb has image and tvdb doesn't: remove tvdb from its list and move tmdb to output actors.vue:111:23
15:19:59.187 ----- beginning of loop ----- actors.vue:84:17
15:19:59.187 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "John Lutz", tvdb: "Jack McBrayer" }
actors.vue:102:17
15:19:59.187 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.187 ----- beginning of loop ----- actors.vue:84:17
15:19:59.187 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "John Lutz", tvdb: "James Marsden" }
actors.vue:102:17
15:19:59.187 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.187 ----- beginning of loop ----- actors.vue:84:17
15:19:59.187 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "John Lutz", tvdb: "Jane Krakowski" }
actors.vue:102:17
15:19:59.187 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.187 ----- beginning of loop ----- actors.vue:84:17
15:19:59.187 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "John Lutz", tvdb: "Jason Sudeikis" }
actors.vue:102:17
15:19:59.187 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.187 ----- beginning of loop ----- actors.vue:84:17
15:19:59.187 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "John Lutz", tvdb: "John Lutz" }
actors.vue:102:17
15:19:59.187 duplicate names and tmdb has image and tvdb doesn't: remove tvdb from its list and move tmdb to output actors.vue:111:23
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Katrina Bowden", tvdb: "Judah Friedlander" }
actors.vue:102:17
15:19:59.188 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Katrina Bowden", tvdb: "Katrina Bowden" }
actors.vue:102:17
15:19:59.188 duplicate names and both have image: remove tmdb from list and move tvdb to output actors.vue:121:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Keith Powell", tvdb: "Keith Powell" }
actors.vue:102:17
15:19:59.188 duplicate names and both have image: remove tmdb from list and move tvdb to output actors.vue:121:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Kevin Dorff", tvdb: "Kevin Brown" }
actors.vue:102:17
15:19:59.188 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Kevin Dorff", tvdb: "Kristen Schaal" }
actors.vue:102:17
15:19:59.188 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Kevin Dotcom Brown", tvdb: "Kristen Schaal" }
actors.vue:102:17
15:19:59.188 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Lonny Ross", tvdb: "Kristen Schaal" }
actors.vue:102:17
15:19:59.188 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Lonny Ross", tvdb: "Lonny Ross" }
actors.vue:102:17
15:19:59.188 duplicate names and both have image: remove tmdb from list and move tvdb to output actors.vue:121:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Maulik Pancholy", tvdb: "Maulik Pancholy" }
actors.vue:102:17
15:19:59.188 duplicate names and both have image: remove tmdb from list and move tvdb to output actors.vue:121:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Rachel Dratch", tvdb: "Scott Adsit" }
actors.vue:102:17
15:19:59.188 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.188 ----- beginning of loop ----- actors.vue:84:17
15:19:59.188 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Tabbie Conrad", tvdb: "Scott Adsit" }
actors.vue:102:17
15:19:59.189 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.189 ----- beginning of loop ----- actors.vue:84:17
15:19:59.189 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Tabbie Conrad", tvdb: "Sherri Shepherd" }
actors.vue:102:17
15:19:59.189 not duplicate: tvdb name comes first alphabetically, move tvdb to output actors.vue:131:21
15:19:59.189 ----- beginning of loop ----- actors.vue:84:17
15:19:59.189 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Tabbie Conrad", tvdb: "Tina Fey" }
actors.vue:102:17
15:19:59.189 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.189 ----- beginning of loop ----- actors.vue:84:17
15:19:59.189 compare first tmdb actor to first tvdb actor: 
Object { tmdb: "Teddy Coluca", tvdb: "Tina Fey" }
actors.vue:102:17
15:19:59.189 not duplicate: tmdb name comes first alphabetically, move tmdb to output actors.vue:128:21
15:19:59.189 ----- beginning of loop ----- actors.vue:84:17
15:19:59.189 tmdb list is empty: append entire tvdb list to output and exit loop actors.vue:87:19
15:19:59.189 tmdb list should be empty: 0 actors.vue:137:15
15:19:59.189 output list size: 34 actors.vue:138:15
-- 
may i suggest that you isolate the code that loads the tmdb list and fix it while ignoring other code like the sort/merge.

================================================

the tmdb list in the wroking version did load the regulars and not the guests.-- since the workspace is at the working version add logging necessary to prove that the working version used only the tmdb list and that it worked.

================================================

you can undo your latest changes --  i was wrong and the series regulars came from tvdb and guests came from tmdb.  
--
now when either of series regulars or guests are processed,  get lists from both tvdb and tmdb and merge them.
-- 
you should be able to get tmdb list of regulars using the data already retrieved from tmdb
---
the current code doesn't show how to get the tvdb guests.  these are the instructions to get tvdb guests: # TVDB API - Get Guest Actors for Episode

## Authentication

First, you need to authenticate and get a token:

```
POST https://api4.thetvdb.com/v4/login
Content-Type: application/json

{
  "apikey": "YOUR_API_KEY"
}
```

Response will include a `token` that you'll use in subsequent requests.

## Get Episode Details with Cast

### Method 1: Get Episode by ID

```
GET https://api4.thetvdb.com/v4/episodes/{episodeId}/extended
Authorization: Bearer {token}
```

### Method 2: Search for Episode

First, get the series ID, then query episodes:

```
GET https://api4.thetvdb.com/v4/series/{seriesId}/episodes/default?season={seasonNumber}&page=0
Authorization: Bearer {token}
```

Then use the episode ID from the results to get extended details.

## Response Structure

The extended episode response includes a `characters` array:

```json
{
  "data": {
    "id": 123456,
    "name": "Episode Title",
    "seasonNumber": 1,
    "number": 5,
    "characters": [
      {
        "id": 789,
        "name": "Character Name",
        "peopleId": 456,
        "personName": "Actor Name",
        "type": 3,
        "isFeatured": false
      }
    ]
  }
}
```

## Character Types

- `type: 3` = Guest Star
- `type: 1` = Main Cast
- `type: 2` = Recurring

## Filter for Guest Stars

Filter the `characters` array where `type === 3` or where `isFeatured === false` to get guest actors.

## Example with cURL

```bash
# Login
curl -X POST https://api4.thetvdb.com/v4/login \
  -H "Content-Type: application/json" \
  -d '{"apikey":"YOUR_API_KEY"}'

# Get episode with guest stars
curl -X GET https://api4.thetvdb.com/v4/episodes/123456/extended \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## Notes

- TVDB API v4 requires authentication for all requests
- Guest actor data may not be available for all episodes
- The `isFeatured` flag can also help identify guest stars (typically `false` for guests)



