
my new worker logic has problems with finishing. it didn't correctly add downloaded files to data/tv-finished.json.  also errors would not be added to data/tv-errors.json.

i think the finished message should include the procId of the finished entry. then there should be a handleFinish(procId) function that processes every finish message by looking at the tv.json entry with that procId. it should create a string "<title>":"<timestamp>" and add it to tv-finished.json or tv-errors.json.

an example "<title>":"<timestamp>" string is: 
"The.Amazing.Mrs.Pritchard.S01E03.Hourglass.WEB-DL.DDP2.0.H.264-squalor.mkv": "2025/12/30-21:31:07",
use that timestamp format.

if the status is "finished" it should add the string "<title>":"<timestamp>" to data/tv-finished.json with a flush every time. 

if the status is an error message the error should be logged to tv.log and the "<title>":"<timestamp>" string should be added to data/tv-errors.json with a flush every time.

the cycle should then skip titles matching ones in tv-finished.json or tv-errors.json. this is old logic that might still be in the code.



